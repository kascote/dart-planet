<!doctype html>
<html lang="en" itemscope id="page_home" itemtype="http://schema.org/WebPage" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
    <meta property="og:locale" content="en_US" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{planetName}}</title>
    <link rel="canonical" href="{{planetUrl}}" />
    <link rel="preload" href="web/style.css" as="style" />
    <link rel="manifest" href="manifest.json" />
    <link href="web/style.css" rel="stylesheet" />
    <link rel="icon" href="web/favicon.png" type="image/png" sizes="256x256" />
    <meta name="keywords" content="{{keywords}}" />
    <meta name="description" content="{{description}}" />
    <meta property="og:site_name" content="{{planetName}}" />
    <meta property="og:title" content="{{planetName}}" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{planetUrl}}" />
    <meta property="og:description" content="{{description}}" />
    <meta name="twitter:title" content="{{planetName}}" />
    <meta name="twitter:description" content="{{description}}" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="planet-rendered" content="{{dateRendered}}" />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "website",
        "name": "{{planetName}}",
        "url": "{{planetUrl}}",
        "description": "{{description}}",
        "about": {
          "@type": "{{planetName}}",
          "description": "{{description}}"
        }
      }
    </script>
  </head>

  <body>
    <div class="container">
      <h1>Dart Planet</h1>
      <div id="container">{{ content }}</div>
      <footer class="footer">
        <small>
          <a href="https://github.com/kascote/dart-planet" target="_blank">Source Code</a>
          |
          <a href="https://github.com/kascote/dart-planet/issues" target="_blank">Report Issue</a>
          |
          <a href="https://github.com/kascote/dart-planet/issues" target="_blank">Suggestions</a>
        </small>
      </footer>
    </div>

    <div class="notification hide">
      <p>Link copied to clipboard.</p>
    </div>

    <script async>
      function notify() {
        const notification = document.querySelector(".notification");
        notification.classList.remove("hide");
        setTimeout(() => notification.classList.add("hide"), 2000);
      }

      function copyUrl(evt) {
        const t = evt.target;
        if (!t.classList.contains("share")) {
          return;
        }

        if (navigator.clipboard) {
          evt.preventDefault();
          navigator.clipboard
            .writeText(t.previousElementSibling.children[0].href)
            .then(() => {
              notify();
            })
            .catch((err) => {
              console.error("Failed to copy: ", err);
            });
        }
      }

      document.getElementsByTagName("body")[0].addEventListener("click", copyUrl);
    </script>
  </body>
</html>
